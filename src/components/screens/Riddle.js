import { useState } from 'react';
import Screen from '../ui/Screen';

const riddles = [
    {
        q: 'Ð“Ð´Ðµ Ð¼Ñ‹ Ð¿Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ð»Ð¸ÑÑŒ?',
        a: ['Ð’ ÐºÐ°Ñ„Ðµ', 'ÐžÐ½Ð»Ð°Ð¹Ð½', 'ÐÐ° ÑƒÐ»Ð¸Ñ†Ðµ'],
        c: 1,
    },
    {
        q: 'Ð­Ñ‚Ð¾ Ð»ÐµÐ³ÐºÐ¾, Ð´Ð°Ð»ÑŒÑˆÐµ ÑÐ»Ð¾Ð¶Ð½ÐµÐµ.',
        as: 'ÐšÐ°ÐºÐ¾Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ„Ð¸Ð»ÑŒÐ¼ Ð¼Ñ‹ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ»Ð¸ Ð² ÐŸÐµÐ½Ð·Ðµ?',
        a: ['Ð“Ð°Ñ€Ñ€Ð¸ ÐŸÐ¾Ñ‚Ñ‚ÐµÑ€', 'Ð”Ð¾Ñ€Ð°Ð¼Ð°', 'Ð¨Ñ€ÐµÐº', 'ÐœÐ°Ñ€Ð²ÐµÐ»', 'Ð¯ Ð½Ðµ Ð¿Ð¾Ð¼Ð½ÑŽ'],
        c: 4,
    },
    {
        q: 'ÐÑƒ Ñ Ð·Ð°Ð±Ñ‹Ð» Ñ‡Ñ‚Ð¾ ÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ»Ð¸, Ð½Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¼Ð½Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ.',
        as: 'Ð§Ñ‚Ð¾ Ñ Ð»ÑŽÐ±Ð»ÑŽ Ð¸ Ñ†ÐµÐ½ÑŽ Ð² Ñ‚ÐµÐ±Ðµ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð²ÑÐµÐ³Ð¾?',
        a: ['Ð£Ð»Ñ‹Ð±ÐºÑƒ', 'Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€', 'ÐÐ°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°', 'Ð£ÑŽÑ‚', 'Ð—Ð°Ð±Ð¾Ñ‚Ð°', 'Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ', 'ÐÑ‚Ð¼Ð¾ÑÑ„ÐµÑ€Ð°', 'ÐÐ¸Ñ‡ÐµÐ³Ð¾', 'Ð’ÑÑ‘ (ÐºÑ€Ð¾Ð¼Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾)'],
        c: 8,
    },
    {
        q: 'Ð Ñ‡Ð¾, Ð½Ñƒ Ñ. ',
        as: 'Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð· Ñ‚Ñ‹ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð»Ð° Ð½Ð° ÑƒÐ»Ð¸Ñ†Ñƒ? (Ð² Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½ Ð½Ðµ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ)',
        a: ['0', '1', '4', '3', '5', '6', 'Ð¯ ÑƒÐ¶Ðµ Ð¸ ÑÐ¾ ÑÑ‡ÐµÑ‚Ð° ÑÐ±Ð¸Ð»Ð°ÑÑŒ'],
        c: 5,
    },
    {
        q: 'Ð¯ ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð°ÑÑ‡Ð¸Ñ‚Ð°Ð»: "ÐšÐ¾Ð½Ñ†ÐµÑ€Ñ‚, ÐµÐ·Ð´Ð¸Ð»Ð¸ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ Ð³Ð¾Ð´, Ð·Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð¾ Ñ Ð±Ñ€Ð°Ñ‚Ð¾Ð¼, Ð·Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð¾ Ñ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑÐ¼Ð¸ (Ð°ÑÑ€Ð¾Ð¿Ð¾Ñ€Ñ‚), Ð¿Ñ€Ð¾Ð¼Ñ‹Ð²Ð°Ñ‚ÑŒ Ð·ÑƒÐ±Ñ‹, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ‚Ð°Ðº Ð¿Ñ€Ð¾Ð³ÑƒÐ»ÑÐ»Ð¸ÑÑŒ Ð¿Ð¾ Ð¾ÐºÑ€ÑƒÐ³Ðµ',
        as: 'ÐšÐ°Ðº Ð·Ð¾Ð²ÑƒÑ‚ Ð¼Ð¾ÑŽ Ð¼Ð°Ð¼Ñƒ?',
        a: ['Ð“Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¸ÐµÐ´ÑƒÑ‚', 'ÐžÐ»ÑŒÐ³Ð° ÐÐ¸ÐºÐ¾Ð»Ð°ÐµÐ²Ð½Ð°', 'Ð¢Ð°Ñ‚ÑŒÑÐ½Ð° ÐÐ¸ÐºÐ¾Ð»Ð°ÐµÐ²Ð½Ð°', 'Ð¢Ð°Ñ‚ÑŒÑÐ½Ð° Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¾Ð²Ð½Ð°', 'ÐžÐ»ÑŒÐ³Ð° Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¾Ð²Ð½Ð°', 'ÐžÐ»ÑŒÐ³Ð° ÐœÐ¸Ñ…Ð°Ð¹Ð»Ð¾Ð²Ð½Ð°'],
        c: 4,
    },
    {
        q: 'ðŸ™ˆðŸ™ˆðŸ™ˆðŸ™ˆðŸ™ˆ',
        as: 'Ð­Ñ‚Ð¾ ÐºÐ°ÐºÐ¾Ð¹ Ð¿Ð¾ ÑÑ‡ÐµÑ‚Ñƒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ?',
        a: ['5', '6', '7', 'Ð”Ð°, Ñ‚Ñ€ÐµÑˆ'],
        c: 1,
    },
];
const errorMessages = [
    'ÐÐµÐµÐµÐµÐµ',
    'ÐÐµÐµÐµ ðŸ™ˆ',
    'Ð”Ð°, Ñ‚Ñ€ÐµÑˆ',
    'Ð”ÑƒÑ€Ð°Ðº?',
    '......',
    'ÐžÐºÐ°Ðº',
    'Ð¯ Ð±Ñ‹ Ð·Ð°ÑÑ‡Ð¸Ñ‚Ð°Ð» Ñ‚ÐµÐ±Ðµ, Ð½Ð¾ Ð½ÐµÑ‚',
];


export default function RiddlesChain({ onNext }) {
    const [i, setI] = useState(0);
    const [errorText, setErrorText] = useState('');

    const answer = idx => {
        if (idx === riddles[i].c) {
            setErrorText('');
            if (i === riddles.length - 1) {
                onNext();
            } else {
                setI(prev => prev + 1);
            }
        } else {
            const random =
                errorMessages[Math.floor(Math.random() * errorMessages.length)];
            setErrorText(random);
        }
    };

    return (
        <Screen>
            <h2
                style={
                    i === riddles.length - 1
                        ? { letterSpacing: '4px', animation: 'pulse 1s infinite' }
                        : {}
                }
            >
                Ð’Ð¸ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð°:{' '}
                {i === riddles.length - 1
                    ? '???'
                    : `${i + 1} Ð¸Ð· 10000`}
            </h2>
            <p>{riddles[i].q}</p>
            <p>{riddles[i].as}</p>

            {riddles[i].a.map((t, idx) => (
                <button key={idx} className="btn" onClick={() => answer(idx)}>
                    {t}
                </button>
            ))}

            {errorText && (
                <p
                    style={{
                        marginTop: 20,
                        fontSize: '1.1em',
                        color: '#ff4081',
                        animation: 'shake 0.3s',
                    }}
                >
                    {errorText}
                </p>
            )}
        </Screen>
    );
}